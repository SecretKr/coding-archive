#include<bits/stdc++.h>
using namespace std;

char c;
int A,B,i,j;
int d[11],e[11];
bool a[11][3][3];
bool b[11][3][3];

int num(int m[3][3]){
	if(m[1][2] == 1 && m[2][2] == 1) return 1;
}

int main()
{
	cin >> A >> B;
	c = getchar();
	for(i = 0;i < 3 && A != 0;i++){
		c = getchar();
		for(j = 0;c != '\n';j++ ){
			if(c == '|' || c == '_'){
				a[j/4][i][j%4] = 1;
			}
			c = getchar();
		}
	}
	for(i = 0;i < 3 && B != 0;i++){
		c = getchar();
		for(j = 0;c != '\n';j++ ){
			if(c == '|' || c == '_'){
				b[j/4][i][j%4] = 1;
			}
			c = getchar();
		}
	}
	
	for(i = 0;i < A;i++){
		if(a[i][1][2] == 1 && a[i][2][2] == 1 && a[i][0][1] == 0 && a[i][1][1] == 0) d[i] = 1;
		if(a[i][0][1] == 1 && a[i][1][2] == 1 && a[i][1][1] == 1 && a[i][2][0] == 1 && a[i][2][1] == 1 && a[i][1][0] == 0) d[i] = 2;
		if(a[i][0][1] == 1 && a[i][1][2] == 1 && a[i][1][1] == 1 && a[i][2][2] == 1 && a[i][2][1] == 1 && a[i][1][0] == 0) d[i] = 3;
		if(a[i][1][0] == 1 && a[i][1][2] == 1 && a[i][1][1] == 1 && a[i][2][2] == 1 && a[i][2][1] == 0) d[i] = 4;
		if(a[i][0][1] == 1 && a[i][1][2] == 0 && a[i][1][1] == 1 && a[i][1][0] == 1 && a[i][2][1] == 1 && a[i][2][2] == 1 && a[i][2][0] == 0) d[i] = 5;
		if(a[i][0][1] == 1 && a[i][1][2] == 0 && a[i][1][1] == 1 && a[i][1][0] == 1 && a[i][2][1] == 1 && a[i][2][2] == 1 && a[i][2][0] == 1) d[i] = 6;
		if(a[i][1][2] == 1 && a[i][2][2] == 1 && a[i][0][1] == 1 && a[i][1][1] == 0 && a[i][1][0] == 0) d[i] = 7;
		if(a[i][0][1] == 1 && a[i][1][2] == 1 && a[i][1][1] == 1 && a[i][1][0] == 1 && a[i][2][1] == 1 && a[i][2][2] == 1 && a[i][2][0] == 1) d[i] = 8;
		if(a[i][0][1] == 1 && a[i][1][2] == 1 && a[i][1][1] == 1 && a[i][1][0] == 1 && a[i][2][1] == 1 && a[i][2][2] == 1 && a[i][2][0] == 0) d[i] = 9;
		if(a[i][0][1] == 1 && a[i][1][2] == 1 && a[i][1][1] == 0 && a[i][1][0] == 1 && a[i][2][1] == 1 && a[i][2][2] == 1 && a[i][2][0] == 1) d[i] = 0;
	}
	for(i = 0;i < B;i++){
		if(b[i][1][2] == 1 && b[i][2][2] == 1 && b[i][0][1] == 0 && b[i][1][1] == 0) e[i] = 1;
		if(b[i][0][1] == 1 && b[i][1][2] == 1 && b[i][1][1] == 1 && b[i][2][0] == 1 && b[i][2][1] == 1 && b[i][1][0] == 0) e[i] = 2;
		if(b[i][0][1] == 1 && b[i][1][2] == 1 && b[i][1][1] == 1 && b[i][2][2] == 1 && b[i][2][1] == 1 && b[i][1][0] == 0) e[i] = 3;
		if(b[i][1][0] == 1 && b[i][1][2] == 1 && b[i][1][1] == 1 && b[i][2][2] == 1 && b[i][2][1] == 0) e[i] = 4;
		if(b[i][0][1] == 1 && b[i][1][2] == 0 && b[i][1][1] == 1 && b[i][1][0] == 1 && b[i][2][1] == 1 && b[i][2][2] == 1 && b[i][2][0] == 0) e[i] = 5;
		if(b[i][0][1] == 1 && b[i][1][2] == 0 && b[i][1][1] == 1 && b[i][1][0] == 1 && b[i][2][1] == 1 && b[i][2][2] == 1 && b[i][2][0] == 1) e[i] = 6;
		if(b[i][1][2] == 1 && b[i][2][2] == 1 && b[i][0][1] == 1 && b[i][1][1] == 0 && b[i][1][0] == 0) e[i] = 7;
		if(b[i][0][1] == 1 && b[i][1][2] == 1 && b[i][1][1] == 1 && b[i][1][0] == 1 && b[i][2][1] == 1 && b[i][2][2] == 1 && b[i][2][0] == 1) e[i] = 8;
		if(b[i][0][1] == 1 && b[i][1][2] == 1 && b[i][1][1] == 1 && b[i][1][0] == 1 && b[i][2][1] == 1 && b[i][2][2] == 1 && b[i][2][0] == 0) e[i] = 9;
		if(b[i][0][1] == 1 && b[i][1][2] == 1 && b[i][1][1] == 0 && b[i][1][0] == 1 && b[i][2][1] == 1 && b[i][2][2] == 1 && b[i][2][0] == 1) e[i] = 0;
	}
	int n;
	if(B > A) A = B;
	n = 0;
	for(i = 0;i <= A;i++){
		d[11-i] = d[A-i];
	}
	for(i = A;i < 11;i++){
		d[10-i] = 0;
	}
	for(i = 0;i <= B;i++){
		e[11-i] = e[B-i];
	}
	for(i = B;i < 11;i++){
		e[10-i] = 0;
	}
	//
	for(i = 11;i > 0;i--){
		d[i] += e[i];
		if(d[i] >= 10){
			d[i-1]++;
			d[i] -= 10;
		}
	}
	n = 0;
	for(i = 0;i < 11;i++){
		if(n == 0 && d[i] == 0);
		else {
			n = 1;
			cout << d[i];
		}
	}
	
}
